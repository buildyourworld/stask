.panel
	.panel-heading
		#recipe_info
			%h1= @recipe.title
			= social_share(@recipe.title, recipe_path(@recipe), services: [:facebook, :twitter, :google_plus, :reddit])
			%p.description= @recipe.description

	.panel-body
		.col-xs-6.col-md-6
			#informations
				%h4 Informations
				%ul#informationslist
					- @information_all.order(:cached_votes_up).reverse.each do |information|
						%div#info
							%div#votes
								= information.get_upvotes.size
								= link_to "", upvote_info_path(information.id), class: "glyphicon glyphicon-thumbs-up"
								= link_to "", downvote_info_path(information.id), class: "glyphicon glyphicon-thumbs-down"
							%div#linkinfo
								= link_to "#{information.title}", information.url, target: :_blank
								- if user_signed_in?
									- if current_user.id == information.user_id
										= link_to "delete info", delete_info_path(information.id), method: :delete
							%div#contrebutton
								.button.glyphicon.glyphicon-exclamation-sign{"data-target" => ".#{information.id}", "data-toggle" => "modal", :type => "button"}
							%br
						%div#contrelien
							- information.contrelien.each do |contre|
								%ul
									%li
										= link_to "#{contre.title}", contre.url, target: :_blank
										- if user_signed_in?
											- if current_user.id == contre.user_id
												= link_to "delete contre", delete_contreinfo_path(contre.id), method: :delete
							.modal.fade{"aria-hidden" => "true", "aria-labelledby" => "mySmallModalLabel", :class => "#{information.id}", :role => "dialog", :tabindex => "-1"}
								.modal-dialog.modal-sm
									.modal-content
										%p Adding a counterlink allow you to criticise the information provided by the belonging link
										= form_for @contrelien, url: add_contreinfo_path(information.id) do |c|
											%p= c.text_field 'title', placeholder: 'add title'
											%p= c.text_field 'url', placeholder: 'add url'
											%p= button_to "ADD"

				%a.btn{"aria-controls" => "addonshowinfo", "aria-expanded" => "false", "data-toggle" => "collapse", :href => "#addonshowinfo"}
					Add an information
				#addonshowinfo.collapse
					.well#addonshowcollapsed
						= form_for @info, url: add_info_recipe_path do |f|
							%p= f.text_field 'title', placeholder:'Add a title'
							%p= f.text_field 'url', placeholder:'Add an url'
							%p= button_to "Add information"
		.col-xs-6.col-md-6
			#directions
				%h4 Astuces
				%ul#directionslist
					- @direction_all.each do |direction|
						%div#tips
							%div#votes
								= direction.get_upvotes.size
								= link_to "", upvote_direction_path(direction.id), class: "glyphicon glyphicon-thumbs-up"
								= link_to "", downvote_direction_path(direction.id), class: "glyphicon glyphicon-thumbs-down"
							%div#step
								- unless direction.title.blank?
									= link_to "#{direction.title}", direction.url, target: :_blank
								- else
									= direction.step
							- if user_signed_in?
								- if current_user.id == direction.user_id
									= link_to "delete direction", delete_direction_path(direction.id), method: :delete

								
						%br
				%a.btn{"aria-controls" => "addonshowdirection", "aria-expanded" => "false", "data-toggle" => "collapse", :href => "#addonshowdirection"}
					Add an astuce
				#addonshowdirection.collapse
					.well#addonshowcollapsed
						= form_for @direction, url: add_direction_recipe_path do |f|
							%p= f.text_field 'title', placeholder:'Add title'
							%p= f.text_field 'url', placeholder:'Add url'
							%p= f.text_field 'step', placeholder:'Add text'
							%p= button_to "Add astuces"

	.panel-footer
		#backedit
			= link_to "Back", root_path, class: "btn btn-default"
			- if user_signed_in?
				- if current_user.id == @recipe.user_id
					= link_to "Edit", edit_recipe_path, class: "btn btn-default"
					= link_to "Delete", recipe_path, method: :delete, data: {confirm: "Are you sure?" }, class: "btn btn-default"